import{s as g}from"../assets/shared-267037b7.js";import{B as w}from"../assets/base-element-be430c97.js";function d({element:t,target:e,position:s,offset:i}){const{left:n,top:a}=e.getBoundingClientRect();let r,o;const{width:p,height:l}=t.getBoundingClientRect(),{width:c,height:h}=e.getBoundingClientRect();if(s==="top"){if(o=a-l-i,r=n+c/2-p/2,t.hasArrow&&t.setAttribute("arrow-position","bottom"),o<2)return d({element:t,target:e,position:"bottom",offset:i})}else if(s==="bottom"){if(o=a+h+i,r=n+c/2-p/2,t.hasArrow&&t.setAttribute("arrow-position","top"),o+l+2>window.innerHeight)return d({element:t,target:e,position:"top",offset:i})}else s==="left"?(o=a+h/2-l/2,r=n-i-p,t.hasArrow&&t.setAttribute("arrow-position","right")):s==="right"&&(o=a+h/2-l/2,r=n+c+i,t.hasArrow&&t.setAttribute("arrow-position","left"));return{x:r,y:o}}customElements.get("cc-tooltip")||customElements.define("cc-tooltip",class extends w{get target(){if(this.hasAttribute("slot"))return this.assignedSlot?.getRootNode().host;this.hasAttribute("for")}connectedCallback(){this.shadowRoot.innerHTML=`
      <style>${g}*{box-sizing:border-box}:host{display:inline-flex;--tooltip-arrow-size: 12px;position:fixed;left:var(--tooltip-left);top:var(--tooltip-top);transition:opacity .3s ease;will-change:opacity;z-index:99999;opacity:0;pointer-events:none;visibility:hidden;font-size:.9em}:host(.visible){opacity:1;visibility:visible;pointer-events:initial}.content{background-color:var(--tooltip-background-color, #0c0c14);color:var(--TODO, #fff);border-radius:var(--_border-radius-md);padding:1em 1.2em;display:grid;gap:.75em}.content *{color:inherit;margin:0}.content:before{content:"";position:absolute;border-width:8px 8px 0;border-top-color:initial;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);background:var(--tooltip-background-color, #0c0c14);transform:rotate(45deg)}:host([arrow-position="bottom"]) .content:before{bottom:calc(var(--tooltip-arrow-size) * -.5);left:calc(50% - var(--tooltip-arrow-size) / 2)}:host([arrow-position="top"]) .content:before{left:calc(50% - var(--tooltip-arrow-size) / 2);bottom:calc(100% + var(--tooltip-arrow-size) * -.5)}:host([arrow-position="left"]) .content:before{top:calc(50% - var(--tooltip-arrow-size) / 2);right:calc(100% + var(--tooltip-arrow-size) * -.5)}:host([arrow-position="right"]) .content:before{top:calc(50% - var(--tooltip-arrow-size) / 2);left:calc(100% + var(--tooltip-arrow-size) * -.5)}
</style>
      <div part="content" class="content">
        ${this.getAttribute("text")??this.innerHTML}
      </div>
    `,this.defer(()=>{this.target&&(this.target?.addEventListener("focusin",this.openTooltip),this.target?.addEventListener("focusout",this.closeTooltip),this.target?.addEventListener("mouseenter",this.openTooltip),this.target?.addEventListener("mouseleave",this.closeTooltip))})}onKeydown=t=>{this.opened&&t.key==="Escape"&&this.closeTooltip()};get opened(){return this.classList.contains("visible")}get hasArrow(){return!0}get position(){return this.hasAttribute("position")?this.getAttribute("position")?.trim():"top"}get content(){return this.shadowRoot.querySelector(".content")}closeTooltip=()=>{this.classList.remove("visible"),document.removeEventListener("keydown",this.onKeydown),document.removeEventListener("wheel",this.onScroll)};openTooltip=()=>{this.setPosition(),this.classList.add("visible"),document.addEventListener("keydown",this.onKeydown),document.addEventListener("wheel",this.onScroll)};get arrowSize(){return+window.getComputedStyle(this).getPropertyValue("--tooltip-arrow-size").replace("px","")}setPosition(){const{x:t,y:e}=d({element:this,target:this.target,position:this.position,offset:2+this.arrowSize});this.style.setProperty("--tooltip-left",`${t}px`),this.style.setProperty("--tooltip-top",`${e}px`)}onScroll=()=>{this.setPosition()}});
